# Fusion Prime Local Environment Variables
# Copy this file to .env.local for local development
#
# This file is for LOCAL development:
#   - Blockchain: Anvil (localhost:8545)
#   - Services: Docker Compose
#   - Database: SQLite/PostgreSQL (local)
#   - Pub/Sub: Emulator
#
# SETUP INSTRUCTIONS:
# 1. Copy this file: cp env.local.example .env.local
# 2. No changes needed for basic local development
# 3. Update contract addresses after deployment
# 4. Never commit .env.local to Git (it's in .gitignore)

# ========================================
# Target Environment: LOCAL
# ========================================

# Blockchain (Anvil)
RPC_URL=http://localhost:8545
CHAIN_ID=31337

# Smart Contracts (Update after deployment)
ESCROW_FACTORY=0x_UPDATE_AFTER_DEPLOY

# Anvil Test Account (Pre-funded with 10,000 ETH)
DEPLOYER_PRIVATE_KEY=0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80
DEPLOYER_ADDRESS=0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266

# Backend Services (Local Docker)
SETTLEMENT_SERVICE_URL=http://localhost:8000
RISK_ENGINE_SERVICE_URL=http://localhost:8001
COMPLIANCE_SERVICE_URL=http://localhost:8002
RELAYER_JOB_NAME=escrow-event-relayer
DATABASE_URL=sqlite:///./settlement.db

# GCP Configuration (Local)
GCP_PROJECT=fusion-prime-local
GCP_REGION=us-central1

# Pub/Sub (Emulator)
PUBSUB_EMULATOR_HOST=localhost:8085
PUBSUB_SETTLEMENT_TOPIC=settlement.events.v1
PUBSUB_SETTLEMENT_SUBSCRIPTION=settlement-events-consumer

# Event Relayer Configuration (Local)
CONTRACT_ADDRESS=0x_UPDATE_AFTER_DEPLOY  # Will be set by setup script
CHECKPOINT_STORE_TYPE=sqlite
CHECKPOINT_STORE_URL=./relayer_checkpoints.db
START_BLOCK=0
POLL_INTERVAL_SECONDS=5
BATCH_SIZE=100
CHECKPOINT_INTERVAL_BLOCKS=10
EVENT_NAMES=EscrowCreated,EscrowReleased,EscrowRefunded,Approval

# Redis (Optional)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# Testing
TEST_PAYEE=0x70997970C51812dc3A010C7d01b50e0d17dc79C8
TEST_AMOUNT=0.01
TEST_DURATION=3600
TEST_REQUIRED_APPROVALS=2

# Feature Flags
FUSION_PRIME_PUBSUB_TEST_MODE=false
LOG_LEVEL=DEBUG

# Environment Label
ENVIRONMENT=local
